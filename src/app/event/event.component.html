<section class="main">
    <div *ngIf="isLoading" class="loading-message">
        <p>Ladataan tietoja hakusanalla {{searchText}} rajapinnasta...odota</p>
      </div>



<input class="text-input" [(ngModel)]="searchText" placeholder="Hae tapahtumaa esim. Sibelius tai Konsertti">

<button class="btn bg-emerald-600 text-stone-100" (click)="DoSearch()">Search
</button>

<button class="btn bg-indigo-700 text-stone-100" (click)="SearchStadion()">Stadion
</button>

<button class="btn bg-indigo-700 text-stone-100" (click)="SearchLapset()">Lapset
</button>

<button class="btn bg-indigo-700 text-stone-100" (click)="SearchHipHop()">Hip Hop
</button>

<button class="btn bg-indigo-700 text-stone-100" type="submit" (click)="changeToday()"
>{{currentDate | date:'dd.MM.yyyy'}} Tänään</button>

<button class="btn bg-indigo-700 text-stone-100" type="submit" (click)="changeToday1()"
>{{tomorrowDate | date:'dd.MM.yyyy'}} Huomenna</button>

<button class="btn bg-indigo-700 text-stone-100" type="submit" (click)="changeToday2()"
>{{tomorrow2Date | date:'dd.MM.yyyy'}} Ylihuomenna</button>

<hr>

<br>
<section class="flex justify-between">
<button class="btn bg-slate-900 text-stone-100" (click)="onPageChangeMinus()">Edellinen sivu</button>

<!--20 item per page-->
<div
  class="mb-1 rounded-lg bg-info-100 px-1 py-1  text-base text-info-800"
  role="alert">
  Sivu {{newPageNumber}} / {{ events?.meta?.count / 20 | number: '1.0-0' }}<br>
    Kohteiden määrä: {{ events?.meta?.count | number: '1.0-0' }} <br>
</div>

<button class="btn bg-slate-900 text-stone-100" (click)="onPageChangePlus()">Seuraava sivu</button>
</section>

<section class="keskiosa">

<aside class="korttilista">

    <article *ngFor="let event of events?.data" class="eventcard">

    <figure class="cardimage">
        <!--If there is not picture replace empty value with random placeholde picture-->
       
        <ng-container *ngIf="event?.images && event?.images?.length > 0; else placeholder">
          <img src="{{ event?.images[0]?.url }}" title="lisenssi: {{event?.images[0]?.license }}, kuvaaja: {{event?.images[0]?.photographer_name}}">
        </ng-container>
        <ng-template #placeholder>
          <img src="https://picsum.photos/640/360">
        </ng-template>
      </figure>

    <aside class="cardtext">
       <h2>{{event?.name?.fi}}</h2>
       <h3 *ngIf="event?.info_url?.fi?.length!"><a href="{{event?.info_url?.fi}}">Liput ja lisätiedot <fa-icon [icon]="arrowUpRightFromBox"></fa-icon>
       </a></h3>
        <ul>
       <li>{{event?.short_description?.fi}}</li>
        <li><span class="bg-emerald-200 ring-1 ring-green-600 p-0.5">Alkaa: {{event?.start_time | date : 'd.M.yyyy klo: H:mm'}}</span></li>
        <li>Loppuu: {{event?.end_time | date : 'd.M.yyyy klo: H:mm'}}</li>
        <li>Osoite: {{event?.location?.street_address?.fi }}, {{event?.location?.postal_code}}, {{event?.location?.address_locality?.fi}}</li>
        <li>
           
            <a [href]="getGoogleMapsLink(event?.location?.position?.coordinates[1], event?.location?.position?.coordinates[0])" target="_blank">Avaa Google Mapsiin
                <fa-icon [icon]="arrowUpRightFromBox"></fa-icon>
            </a>

    </li>
        </ul>


        </aside>

        <section class="liput bg-gradient-to-r from-indigo-500 to-indigo-800 text-stone-50">
            <h2>Lisätiedot</h2>
            <span *ngIf="event?.offers[0]?.is_free === true || false">Ilmaistapahtuma: {{event?.offers[0]?.is_free ? 'Kyllä' : 'Ei'}}<br></span>
        <span *ngIf="event?.offers[0]?.price?.fi.length!">Liput: {{event?.offers[0]?.price?.fi}}<br></span>
        <span *ngIf="event?.audience_min_age?.length!">Alaikäraja: {{event?.audience_min_age}}<br></span>
        <span *ngIf="event?.audience_max_age?.length!">Yläikäraja: {{event?.audience_max_age}}</span>
        </section>
       
    </article>

 

</aside>

</section>

</section>